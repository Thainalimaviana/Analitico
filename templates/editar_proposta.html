<link rel="icon" type="image/png" href="{{ url_for('static', filename='img/logo.png') }}">
{% extends "base.html" %}
{% block title %}Editar Proposta{% endblock %}

{% block content %}
<style>
    .editar-container {
        max-width: 750px;
        margin: 40px auto;
        background: rgba(255, 255, 255, 0.15);
        backdrop-filter: blur(10px);
        border-radius: 18px;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.25);
        padding: 35px 40px;
        text-align: center;
    }

    .editar-container h1 {
        font-size: 28px;
        color: var(--cor-texto);
        font-weight: 700;
        margin-bottom: 25px;
    }

    form {
        display: flex;
        flex-direction: column;
        gap: 18px;
    }

    .form-linha {
        display: flex;
        gap: 15px;
        flex-wrap: wrap;
    }

    .barra-cpf {
        flex: 1;
        padding: 12px 14px;
        border-radius: 10px;
        background: linear-gradient(40deg, var(--gradiente-inicio), var(--gradiente-fim));
        font-size: 15px;
        color: var(--cor-texto);
        font-weight: 600;
        outline: none;
        transition: all 0.25s ease-in-out;
    }

    .barra-cpf:focus {
        box-shadow: 0 0 8px #00b84d;
        transform: scale(1.01);
    }

    textarea.barra-cpf {
        resize: none;
        height: 90px;
    }

    .data-hora-linha {
        display: flex;
        flex-direction: column;
        align-items: flex-start;
        margin-top: 10px;
    }

    .data-hora-linha label {
        color: var(--cor-texto);
        font-weight: 600;
        font-size: 15px;
        margin-bottom: 6px;
        margin-left: 3px;
    }

    input[type="datetime-local"].barra-cpf {
        width: 100%;
        transition: 0.3s ease;
    }

    input[type="datetime-local"].barra-cpf:focus {
        border-color: #00b848;
        box-shadow: 0 0 6px rgba(0, 255, 128, 0.4);
        background: rgba(255, 255, 255, 0.18);
    }

    .button-group {
        margin-top: 10px;
    }

    button.azul {
        background: linear-gradient(90deg, #007bff, #00c3ff);
        border: none;
        color: white;
        font-weight: 700;
        font-size: 16px;
        padding: 12px 22px;
        border-radius: 10px;
        cursor: pointer;
        transition: all 0.25s;
    }

    button.azul:hover {
        background: linear-gradient(90deg, #0068d9, #00aee0);
        transform: scale(1.03);
    }

    i.fa-save {
        margin-right: 6px;
    }
</style>

<div class="editar-container">
    <h1>Editar Proposta</h1>

    <form method="POST">
        <div class="form-linha">
            <input class="barra-cpf" type="text" name="fonte" value="{{ proposta[2] }}" placeholder="Fonte da Proposta (ex: CLT / FGTS)">
            <input class="barra-cpf" type="text" name="senha_digitada" value="{{ proposta[3] }}" placeholder="Senha digitada (ex: PAN / QI)">
            <input class="barra-cpf" type="text" name="tabela" value="{{ proposta[4] }}" placeholder="Tabela (ex: Facta / QI)">
        </div>

        <div class="form-linha">
            <input class="barra-cpf" type="text" name="nome_cliente" value="{{ proposta[5] }}" placeholder="Nome do Cliente">
            <input class="barra-cpf" type="text" name="cpf" value="{{ proposta[6] }}" placeholder="CPF (somente números)">
        </div>

        <div class="form-linha">
            <input class="barra-cpf" type="number" step="0.01" name="valor_equivalente" value="{{ proposta[7] }}" placeholder="Valor Equivalente (R$)">
            <input class="barra-cpf" type="number" step="0.01" name="valor_original" value="{{ proposta[8] }}" placeholder="Valor Original (R$)">
        </div>

        <textarea name="observacao" class="barra-cpf" placeholder="Observações adicionais...">{{ proposta[9] }}</textarea>

        <div class="form-linha">
            <input class="barra-cpf" type="text" name="telefone" value="{{ proposta[10] }}" placeholder="Telefone com DDD">
        </div>

        <div class="form-linha data-hora-linha">
            <label>Data e Hora (opcional):</label>
            <input class="barra-cpf" type="datetime-local" name="data_manual"
                   value="{{ proposta[1]|replace(' ', 'T') if proposta[1] else '' }}">
            <small style="color: var(--cor-texto); opacity: 0.7; margin-top: 4px;">
                Se não alterar, será mantida a data original: {{ proposta[1] }}
            </small>
        </div>

        <div class="button-group">
            <button type="submit" class="azul">
                <i class="fa fa-save"></i> Salvar Alterações
            </button>
        </div>
    </form>
</div>
{% endblock %}
